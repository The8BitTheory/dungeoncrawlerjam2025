#RetroDevStudio.MetaData.BASIC:7169,BASIC V7.0,uppercase,10,10
# MAP GENERATOR
# DATA FORMAT

#  1 BYTE: OFFSET TO MAPDATA
#  1 BYTE: WIDTH TILES
#  1 BYTE: HEIGHT TILES
#  2 BYTES: NR GEMS TO COLLECT
#  3 BYTES: SPAWN POINT(S)
#  4 BYTES: TELEPORT FIELDS (2 BYTES EACH)
#  2 BYTES: EXIT

10 DEF FN MV(ZZ)=ZZ-48

20 BE=PEEK(4624)+PEEK(4625)*256

27 W%=20:H%=11

55 MP%(0)=W%*2:MP%(1)=H%:MP%(2)=MP%(0)*MP%(1)

62 BANK 0
63 FOR X=0TO W%*H%-1:REM 28*MP%(1)-1:REM 11*20-1
64  READ MV$
65  IF MV$="2" THEN GS%(0)=GS%(0)+1:GOTO75
66  IF MV$="6" THEN PS%(0)=X:GOTO75
67  IF MV$="8" THEN TL%(TL)=X:TL=TL+1:GOTO75

68  IF MV$="B" THEN PS%(1)=X:GOTO75
69  IF MV$="F" THEN PS%(2)=X:GOTO75
70  IF MV$="H" THEN PS%(3)=X:GOTO75
71  IF MV$="J" THEN PS%(4)=X:GOTO75

72  IF MV$="X" THEN EX%=X

75  MV=FNMV(ASC(MV$))
76  
79 NEXT
80 BANK 15



59999 END


# MAP DATA
# ODD NUMBERS ARE NOT-WALKABLE
# 1 - REGULAR WALL
# 3 - WALL OF MONSTER DEN
# 5 - DOOR OF MONSTER DEN
#  IT'S ABOUT THE LOWEST BIT OF THE ASCII CODE, NOT THE HEX-REP. SO, A IS ODD (65)

# EVEN NUMBERS ARE
# 0 - EMPTY
# 2 - COIN
# 4 - POWER COIN
# 6 - SPAWN POINT
# 8 - TELEPORT TO SAME CHAR
# SAME AS ABOVE.B IS NOT HEX-B BUT SOME EVEN ASCII CODE
# B - SPAWNPOINT OF GHOST 1 (20)
# D - SPAWNPOINT OF GHOST 2 (22)
# F - SPAWNPOINT OF GHOST 3 (24)
# H - SPAWNPOINT OF GHOST 4 (26)
# X - DISABLED EXIT (VALUE IS 40)
# Z - ENABLED EXIT (VALUE IS 42)

60000 DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
60001 DATA 1,2,2,2,2,1,2,2,2,X,2,2,2,2,1,2,2,2,2,1
60002 DATA 1,2,1,1,2,1,2,1,1,1,1,1,1,2,1,2,1,1,2,1
60003 DATA 1,2,1,2,2,2,2,2,B,0,0,0,2,2,2,2,2,1,4,1
60004 DATA 1,2,1,2,1,1,2,1,1,1,1,1,1,2,1,1,2,1,2,1
60005 DATA 1,2,2,2,2,2,2,1,1,1,1,1,1,2,2,2,2,2,2,1
60006 DATA 1,2,1,2,1,1,2,1,1,1,1,1,1,2,1,1,2,1,2,1
60007 DATA 1,4,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1
60008 DATA 1,2,1,1,2,1,2,1,1,1,1,1,1,2,1,2,1,1,2,1
60009 DATA 1,2,2,2,2,1,2,2,2,2,2,2,2,2,1,2,2,2,6,1
60010 DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1

