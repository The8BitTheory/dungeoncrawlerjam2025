#RetroDevStudio.MetaData.BASIC:7169,BASIC V7.0 VDC,uppercase,10,10
# TILESET FROM BMP TO VDC

10 DEF FN PW(ZZ)=PEEK(ZZ)+PEEK(ZZ+1)*256
15 BE=FNPW(4624)

20 GRAPHIC0:DD=PEEK(186)
25 PRINT "INSERT DISK AND PRESS KEY TO CONTINUE":GETKEY I$

30 PRINT"LOADING VDCBASIC...";:BLOAD"VDCBASIC2D.0AC6",U(DD),B0:PRINT"DONE":SYS DEC("AC6")

40 ::RGO 28,16:REM 64K VRAM
50 ::RGO 25,128:REM BITMAP MODE ON
60 ::RGW 36,0
62 DISP 0:ATTR 16000
64 VMF 0,0,16000
66 VMF 16000,DEC("F"),2000

70 PRINT"LOADING FONT...";:BLOAD"FONT.VDC",U(DD),B0,P(BE)
80 FL=FNPW(174)-BE:PRINT FL" BYTES DONE"
#  COPY FROM +2 BECAUSE FIRST TWO BYTES CONTAIN WIDTH AND HEIGHT OF BMP
90 RTV BE+2,18000,FL

#   SOURCE ADDRESS
100 SC=18000
#   TARGET ADDRESS
110 TG=0
#   COPY-SIZE
120 CS=3
#   REPEATS
130 RP=6
#   SOURCE ADDRESS INCREASE PER REPETITION
140 SI=3
#   TARGET ADDRESS INCREASE PER REPETITION
150 TN=PEEK(BE)+1

#   TS:TILE SOURCE
#   TT:TILE TARGET
#   TR:TILE ROW
#   TC:TILE COLUMN
#   TN:NR OF BYTES PER ROW (=PIXELS / 2)
170 TS=0:TT=0
180 FOR TR=0TO5
185  TS=TR*TN*6
190  FOR TC=0TO15
#195   PRINT "VMC "(SC+TS)","(TG+TT)","CS","RP","SI","TN
200   VMC SC+TS,TG+TT,CS,RP,SI,TN
220   TS=TS+3:TT=TT+18
230  NEXT
#235  GETKEY I$
240 NEXT

250 VTR 0,BE,FL
260 BSAVE"@FONT2.VDC",B0,U(DD),P(BE)TOP(BE+FL)


## VMC NR*18,8000,3,6,80
