#RetroDevStudio.MetaData.BASIC:7169,BASIC V7.0 VDC,uppercase,10,10

# LOADS THE WALLSETFILE FROM DISK AND DISPLAYS IT ON THE SCREEN

5 DEF FN PA(ZZ)=7*ZZ+1

10 GRAPHIC0:BANK0
20 DD=PEEK(186)
30 BE=PEEK(4624)+PEEK(4625)*256
40 BLOAD"VDCBASIC2D.0AC6",B0,U(DD):SYSDEC("AC6")
50 AP=16000

60 RGW0,127:RGW4,155:RGW6,100:RGW7,140:RGW9,1
70 RGO25,128:REM BITMAP MODE ON
80 RGO28,2î¸ž4:REM 64K VRAM
90 RGW36,0
100 RGW DEC("1A"),DEC("FF")

110 VMF0,15,AP:REM SETUP PIXELS
120 VMFAP,0,8000:REM CLEAR ATTRIBUTE RAM
130 DISP0:ATTRAP:DA=AP+8000:OS=0

140 DIM DM(18,4)

150 FI$="WALLS.VDC"
160 ?"LOADING "FI$"...";:BLOAD (FI$),B0,P(BE):? "DONE"

170 FL=PEEK(174)+PEEK(175)*256-BE:?"LENGTH:"FL

175 DC=PEEK(BE):PRINT DC " ENTRIES"
176 D=FNPA(DC)
177 FL=FL-D

180 ?"RTV TO "DA:FAST

190 RTV BE+D,DA,FL

195 FOR FI=0 TO DC-1

196  PA=BE+FNPA(FI)

210  DM(FI,0)=PEEK(PA)+PEEK(PA+1)*256
220  DM(FI,1)=PEEK(PA+2)
230  DM(FI,2)=PEEK(PA+3)
240  DM(FI,3)=PEEK(PA+4)+PEEK(PA+5)*256
245  DM(FI,4)=PEEK(PA+6)

250  PRINT DM(FI,0)" "DM(FI,1)" "DM(FI,2)" "DM(FI,3)

270 NEXT

275 SLOW

280 FOR FI=0TO18

290  BW=DM(FI,1):BH=DM(FI,2):FL=DM(FI,3):PO=DM(FI,4)

300  VMC DA+DM(FI,0),AP+PO,BW,BH,80,BW


310  DO:LOOPWHILE TI-S<25
320 NEXT

340 GOTO 280
350 SLOW
360 BANK15