#RetroDevStudio.MetaData.BASIC:7169,BASIC V7.0 VDC,uppercase,10,10
1 DEF FN HB(ZZ)=DEC(LEFT$(HEX$(ZZ),2))
2 DEF FN LB(ZZ)=DEC(RIGHT$(HEX$(ZZ),2))

10 GRAPHIC0:BANK0
20 DD=PEEK(186)
30 BE=PEEK(4624)+PEEK(4625)*256
40 BLOAD"VDCBASIC2D.0AC6",B0,U(DD):SYSDEC("AC6")
50 AP=16000

60 RGW0,127:RGW4,155:RGW6,100:RGW7,140:RGW9,1
70 RGO25,128:REM BITMAP MODE ON
80 RGO28,2î¸ž4:REM 64K VRAM
90 RGW36,0
100 RGW DEC("1A"),DEC("FF")

110 VMF0,15,AP:REM SETUP PIXELS
120 VMFAP,0,8000:REM CLEAR ATTRIBUTE RAM
130 DISP0:ATTRAP:DA=AP+8000:OS=0

140 DIM DM(18,3):DC=19

150 FOR FI=1TO DC:FI$=MID$(STR$(FI),2)+".VDC"
160  ?"LOADING "FI$"...";:BLOAD (FI$),B0,P(BE):? "DONE"

170  FL=PEEK(174)+PEEK(175)*256-BE:?"LENGTH:"FL:FL=FL-2

180  ?"RTV TO "(DA+OS)

190  RTV BE+2,DA+OS,FL

200  BW=PEEK(BE):BH=PEEK(BE+1)

210  DM(FI-1,0)=OS
220  DM(FI-1,1)=BW+1
230  DM(FI-1,2)=BH
240  DM(FI-1,3)=FL

250  PRINT DM(FI-1,0)" "DM(FI-1,1)" "DM(FI-1,2)" "DM(FI-1,3)

260  OS=OS+FL

270 NEXT:PRINT "LAST OS:"OS

#   6 BYTES PER WALL-OBJECT ENTRY. PLUS 1 BYTE FOR THE NR OF ENTRIES
#   0,1: OFFSET IN VRAM (STARTING WITH 0)
#   2:   BW
#   3:   BH
#   4,5: OBJECT-LENGTH
271 D=6*DC+1:POKE BE,DC

272 FOR FI=0TO18:PA=BE+1+FI*6

273  POKE PA,FNLB(DM(FI,0)):POKEPA+1,FNHB(DM(FI,0))
274  POKE PA+2,DM(FI,1)
275  POKE PA+3,DM(FI,2)
276  POKE PA+4,FNLB(DM(FI,3)):POKEPA+5,FNHB(DM(FI,3))

277 NEXT
278 VTR DA,BE+D,OS

279 BSAVE"@WALLS.VDC",B0,P(BE)TOP(BE+OS+D)


280 FAST:S1=TI:FOR FI=0TO18:S=TI

290  BW=DM(FI,1):BH=DM(FI,2):FL=DM(FI,3)

#235  PRINT "VMC FROM "DM(FI,0)" TO 0,BW:"BW",BH:"BH",FL:"FL

300  VMC DA+DM(FI,0),AP,BW,BH,80,BW


310  DO:LOOPWHILE TI-S<25
320 NEXT:S1=TI-S1:SLOW:PRINT "19 COPIES TOOK "S" JIFFIES."
330 GETKEY I$:FAST

340 GOTO 230
350 SLOW
360 BANK15